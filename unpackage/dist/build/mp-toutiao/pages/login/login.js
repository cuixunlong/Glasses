(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0b23":function(n,e,t){},"327a":function(n,e,t){"use strict";var o=t("0b23"),i=t.n(o);i.a},8361:function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={data:function(){return{SessionKey:"",phoneNumber:"",OpenId:"",nickName:null,avatarUrl:"/static/sign/logo_sign.png",show:!0,number:!1,sureShow:!1}},onLoad:function(){this.sign()},methods:{getInfoBtn:function(){n.$u.throttle(this.getInfo,1e3)},getInfo:function(){var e=this;n.showLoading({title:"加载中"}),setTimeout((function(){n.hideLoading()}),300),n.getUserProfile({desc:"获取个人信息",success:function(t){n.hideLoading(),e.avatarUrl=t.userInfo.avatarUrl,n.setStorageSync("nickName",t.userInfo.nickName),n.setStorageSync("avatarUrl",t.userInfo.avatarUrl),e.show=!1,e.number=!0}})},getPhoneNumber:function(e){var t=this;console.log(e),this.$u.post("/login/getWxPhone",{encryptedData:e.detail.encryptedData,session_key:n.getStorageSync("session_key"),iv:e.detail.iv}).then((function(e){console.log(e.error),0==e.error?(t.show=!1,t.phoneNumber=e.data.purePhoneNumber,n.setStorageSync("phoneNumber",e.data.purePhoneNumber),t.doBind(),t.$u.post("/login/userBind",{mobile:t.phoneNumber,face:n.getStorageSync("avatarUrl"),nickname:n.getStorageSync("nickName"),wx_openid:n.getStorageSync("wx_openid"),invite:n.getStorageSync("uid_key")}).then((function(e){0==e.error?(n.setStorageSync("is_bind",1),t.sureShow=!0):t.loginFalse()}))):n.showToast({title:e.msg,icon:"none"})}))},confirm:function(){n.switchTab({url:"../index/index"})},back:function(){n.switchTab({url:"../index/index"})},douyinLogin:function(){var e=this;tt.login({force:!0,success:function(t){e.$u.post("/login/dylogin",{code:t.code}).then((function(t){console.log(t.error),0==t.error&&(n.setStorageSync("token",t.data.token),n.setStorageSync("session_key",t.data.session_key),n.setStorageSync("is_bind",t.data.is_bind),n.setStorageSync("wx_openid",t.data.wx_openid),n.getUserInfo({withCredentials:!0,success:function(o){n.setStorageSync("avatarUrl",o.userInfo.avatarUrl),e.$u.post("/login/userBind",{mobile:"18888888888",face:o.userInfo.avatarUrl,nickname:o.userInfo.nickName,wx_openid:t.data.wx_openid,invite:""}).then((function(n){0==n.error?e.sureShow=!0:e.loginFalse()}))},fail:function(){console.log("getUserInfo 调用失败")}}))}))},fail:function(n){console.log("login 调用失败")}})},sign:function(){},doBind:function(){if(n.hideKeyboard(),!this.phoneNumber)return n.showToast({title:"获取手机号码失败",icon:"none"}),!1},loginFalse:function(){return n.hideKeyboard(),n.showToast({title:"登录失败",icon:"none"}),!1}}};e.default=t}).call(this,t("f266")["default"])},8432:function(n,e,t){"use strict";t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return o}));var o={uModal:function(){return t.e("uview-ui/components/u-modal/u-modal").then(t.bind(null,"e656"))}},i=function(){var n=this,e=n.$createElement;n._self._c},a=[]},d832:function(n,e,t){"use strict";(function(n,e){t("c264");i(t("66fd"));var o=i(t("fe6a"));function i(n){return n&&n.__esModule?n:{default:n}}n.__webpack_require_UNI_MP_PLUGIN__=t,e(o.default)}).call(this,t("f266")["default"],t("f266")["createPage"])},e2a8:function(n,e,t){"use strict";t.r(e);var o=t("8361"),i=t.n(o);for(var a in o)"default"!==a&&function(n){t.d(e,n,(function(){return o[n]}))}(a);e["default"]=i.a},fe6a:function(n,e,t){"use strict";t.r(e);var o=t("8432"),i=t("e2a8");for(var a in i)"default"!==a&&function(n){t.d(e,n,(function(){return i[n]}))}(a);t("327a");var r,u=t("f0c5"),s=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);e["default"]=s.exports}},[["d832","common/runtime","common/vendor"]]]);